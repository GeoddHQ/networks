"use strict";(self.webpackChunkgeodd_networks=self.webpackChunkgeodd_networks||[]).push([[1285],{6370:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var s=n(4848),i=n(8453);const r={displayed_sidebar:"celestiaSidebar"},t="Upgrade Validator",o={id:"celestia/validator/upgrade-validator",title:"Upgrade Validator",description:"When a new release is announced (such as in the Celestia Discord channel), you must update your validator to the specified version. This is handled efficiently by modifying the app\\_version variable in the Ansible playbook.",source:"@site/docs/celestia/validator/upgrade-validator.md",sourceDirName:"celestia/validator",slug:"/celestia/validator/upgrade-validator",permalink:"/docs/celestia/validator/upgrade-validator",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/celestia/validator/upgrade-validator.md",tags:[],version:"current",frontMatter:{displayed_sidebar:"celestiaSidebar"},sidebar:"celestiaSidebar",previous:{title:"Register Validator",permalink:"/docs/celestia/validator/register-validator"},next:{title:"Quick Commands",permalink:"/docs/celestia/validator/quick-commands"}},l={},d=[{value:"<strong>Key Variable: <code>app_version</code></strong>",id:"key-variable-app_version",level:4},{value:"<strong>Steps to Upgrade Validator Node Using Ansible</strong>",id:"steps-to-upgrade-validator-node-using-ansible",level:4}];function c(e){const a={code:"code",h1:"h1",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.header,{children:(0,s.jsx)(a.h1,{id:"upgrade-validator",children:"Upgrade Validator"})}),"\n",(0,s.jsxs)(a.p,{children:["When a new release is announced (such as in the Celestia Discord channel), you must update your validator to the specified version. This is handled efficiently by modifying the ",(0,s.jsx)(a.strong,{children:"app_version"})," variable in the Ansible playbook."]}),"\n",(0,s.jsx)(a.h4,{id:"key-variable-app_version",children:(0,s.jsxs)(a.strong,{children:["Key Variable: ",(0,s.jsx)(a.code,{children:"app_version"})]})}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:(0,s.jsx)(a.code,{children:"app_version"})}),": This variable specifies the version of the Celestia app you want to upgrade to. Always check for the latest version announcement on the Celestia Discord channel and update the playbook accordingly."]}),"\n",(0,s.jsx)(a.p,{children:"Example of updating the version:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-yaml",children:'app_version: "v2.1.2"\n'})}),"\n",(0,s.jsxs)(a.p,{children:["When a new version is released (e.g., ",(0,s.jsx)(a.code,{children:'"v2.1.3"'}),"), you must change the ",(0,s.jsx)(a.code,{children:"app_version"})," variable in the playbook to reflect this new version before running the upgrade."]}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsx)(a.h4,{id:"steps-to-upgrade-validator-node-using-ansible",children:(0,s.jsx)(a.strong,{children:"Steps to Upgrade Validator Node Using Ansible"})}),"\n",(0,s.jsxs)(a.ol,{children:["\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"Update the Playbook with the Latest Version:"})}),"\n",(0,s.jsxs)(a.p,{children:["Edit the ",(0,s.jsx)(a.code,{children:"upgrade_validator.yml"})," playbook and modify the ",(0,s.jsx)(a.code,{children:"app_version"})," variable to the latest release from Celestia:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-yaml",children:'app_version: "v2.1.3"  # Update this to the latest version as per Discord announcement\n'})}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"Run the Upgrade Playbook:"})}),"\n",(0,s.jsx)(a.p,{children:"After updating the version, execute the playbook to upgrade your validator:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-bash",children:"ansible-playbook -i hosts.ini playbooks/upgrade-validator.yml -l <target-host>\n"})}),"\n",(0,s.jsx)(a.p,{children:"\\"}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"Upgrading Multiple Nodes:"})}),"\n",(0,s.jsxs)(a.p,{children:["To upgrade multiple validator nodes simultaneously, update your ",(0,s.jsx)(a.code,{children:"hosts.ini"})," file to include all the validators you want to upgrade. For example:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-ini",children:"[validators]\nvalidator1 ansible_host=192.168.0.101\nvalidator2 ansible_host=192.168.0.102\n"})}),"\n",(0,s.jsx)(a.p,{children:"Then run the playbook for all validators:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-bash",children:"ansible-playbook -i hosts.ini playbooks/upgrade_validator.yml -l validators\n"})}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Confirm the Upgrade:"})," Once the playbook completes, verify the upgrade by checking the status of the validator service:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-bash",children:"sudo systemctl status celestia-appd\n"})}),"\n",(0,s.jsx)(a.p,{children:"Additionally, confirm the running version of the Celestia app:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-bash",children:"bashCopy codecelestia-appd version\n"})}),"\n",(0,s.jsxs)(a.p,{children:["The version should match the one specified in the ",(0,s.jsx)(a.code,{children:"app_version"})," variable."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,a,n)=>{n.d(a,{R:()=>t,x:()=>o});var s=n(6540);const i={},r=s.createContext(i);function t(e){const a=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(r.Provider,{value:a},e.children)}}}]);